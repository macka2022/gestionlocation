<!DOCTYPE html>
<html>
<head>

    <style>
    /* Card immeuble */
    .card-box {
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    background-color: #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    /* Titre immeuble */
    .product-detail-title {
    font-size: 1.5rem;
    font-weight: 500;
    }

    .product-detail-subtitle {
    font-weight: 500;
    color: #555;
    }

    /* Section équipements et adresse */
    .product-detail-desc h4 {
    margin-top: 15px;
    margin-bottom: 5px;
    color: crimson;;
    }

    .product-detail-desc p, .product-detail-desc span {
    font-size: 0.95rem;
    color: #333;
    }

    /* Liste des unités */
    .pricing-card {
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    padding: 15px;
    text-align: center;
    transition: transform 0.2s;
    }
    .pricing-card:hover {
    transform: scale(1.03);
    }
    .pricing-price {
    font-size: 1.2rem;
    font-weight: bold;
    margin-bottom: 10px;
    }

    .cta .btn {
    margin-top: 10px;
    }

    /* Indisponible */
    .text-muted {
    color: #999 !important;
    font-weight: bold;
    }

    body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, #6a11cb, #2575fc);
        margin: 0;
        color: #333;
    }

    /* --- TOPBAR --- */
    .topbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: linear-gradient(90deg, #6a11cb, #ff6ec4);
        padding: 1rem 2rem;
        color: white;
        box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .topbar .logo {
        height: 40px;
    }

    .nav-links {
        display: flex;
        gap: 1.5rem;
        list-style: none;
        margin: 0;
        padding: 0;
    }

    .nav-links a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        position: relative;
        transition: all 0.3s ease;
    }

    .nav-links a::after {
        content: "";
        position: absolute;
        bottom: -5px;
        left: 0;
        height: 2px;
        width: 0;
        background: white;
        transition: width 0.3s;
    }

    .nav-links a:hover::after {
        width: 100%;
    }

    .user-name {
        margin-right: 1rem;
        font-weight: 600;
    }

    .logout-btn {
        color: white;
        text-decoration: none;
        font-weight: bold;
        padding: 6px 12px;
        border: 1px solid white;
        border-radius: 20px;
        transition: 0.3s;
    }

    .logout-btn:hover {
        background: white;
        color: #6a11cb;
    }

    /* --- CONTAINER --- */
    .table-container {
        margin: 2rem auto;
        padding: 2rem;
        background: white;
        border-radius: 20px;
        max-width: 95%;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        animation: fadeIn 0.8s ease;
    }

    .table-title {
        font-size: 1.6rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        text-align: center;
        color: #6a11cb;
    }

    /* --- TABLE --- */
    .custom-table {
        width: 100%;
        border-collapse: collapse;
    }

    .custom-table thead {
        background: linear-gradient(90deg, #6a11cb, #ff6ec4);
        color: white;
    }

    .custom-table th,
    .custom-table td {
        padding: 14px 16px;
        text-align: left;
    }

    .custom-table tbody tr {
        border-bottom: 1px solid #eee;
        transition: background 0.3s, transform 0.2s;
    }

    .custom-table tbody tr:hover {
        background: #f8f0ff;
        transform: scale(1.01);
    }

    /* --- BUTTONS --- */
    .btn-action {
        display: inline-block;
        padding: 6px 12px;
        border-radius: 8px;
        font-size: 0.85rem;
        font-weight: 600;
        text-decoration: none;
        transition: 0.3s;
        margin: 2px;
    }

    .btn-crimson {
        background: linear-gradient(90deg, #ff6ec4, #6a11cb);
        color: white;
    }

    .btn-crimson:hover {
        opacity: 0.85;
        transform: translateY(-2px);
    }

    /* --- Animation --- */
    @keyframes fadeIn {
        from {opacity: 0; transform: translateY(10px);}
        to {opacity: 1; transform: translateY(0);}
    }
    </style>
    <!-- Basic Page Info -->
    <meta charset="utf-8" />
    <title>DeskApp - Bootstrap Admin Dashboard HTML Template</title>

    <!-- Site favicon -->
    <link
            rel="apple-touch-icon"
            sizes="180x180"
            th:href="@{/vendors/images/apple-touch-icon.png}"
    />
    <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            th:href="@{/vendors/images/favicon-32x32.png}"
    />
    <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            th:href="@{/vendors/images/favicon-16x16.png}"
    />

    <!-- Mobile Specific Metas -->
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1"
    />

    <!-- Google Font -->
    <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
            rel="stylesheet"
    />
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" th:href="@{/vendors/styles/core.css}" />
    <link
            rel="stylesheet"
            type="text/css"
            th:href="@{/vendors/styles/icon-font.min.css}"
    />
    <link rel="stylesheet" type="text/css" th:href="@{/vendors/styles/style.css}" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
            async
            src="https://www.googletagmanager.com/gtag/js?id=G-GBZ3SGGX85"
    ></script>
    <script
            async
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2973766580778258"
            crossorigin="anonymous"
    ></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag("js", new Date());

        gtag("config", "G-GBZ3SGGX85");
    </script>
    <!-- Google Tag Manager -->

    <!-- End Google Tag Manager -->
</head>
<body>



<div  class="topbar" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

    <div class="topbar-left">
        <a href="/">
            <img src="vendors/images/deskapp-logo-white.svg" alt="logo" class="logo"/>
        </a>
    </div>

    <div class="topbar-center">
        <ul class="nav-links">
            <!-- ADMIN -->
            <li sec:authorize="hasRole('ADMIN')">
                <a th:href="@{/immobilier/immeuble/admin/list}"><i class="bi bi-house"></i> Immeubles</a>
            </li>
            <li sec:authorize="hasRole('ADMIN')">
                <a th:href="@{/immobilier/utilisateur/list}"><i class="bi bi-people"></i> Utilisateurs</a>
            </li>
            <li sec:authorize="hasRole('ADMIN')">
                <a th:href="@{/contrats/admin/list}"><i class="bi bi-file-text"></i> Contrats</a>
            </li>
            <li sec:authorize="hasRole('ADMIN')">
                <a th:href="@{/paiements/contrat}"><i class="bi bi-currency-dollar"></i> Paiements</a>
            </li>
            <li sec:authorize="hasRole('ADMIN')">
                <a th:href="@{/admin/dashboard}"><i class="bi bi-speedometer2"></i> Dashboard</a>
            </li>

            <!-- LOCATAIRE -->
            <li sec:authorize="hasRole('LOCATAIRE')">
                <a th:href="@{/immobilier/immeuble/locataire/list}"><i class="bi bi-building"></i> Mes Immeubles</a>
            </li>
            <li sec:authorize="hasRole('LOCATAIRE')">
                <a th:href="@{/demandes/mes-demandes}"><i class="bi bi-card-checklist"></i> Mes Réservations</a>
            </li>
            <li sec:authorize="hasRole('LOCATAIRE')">
                <a th:href="@{/contrats/locataire/list}"><i class="bi bi-file-text"></i> Mes Contrats</a>
            </li>

            <!-- PROPRIETAIRE -->
            <li sec:authorize="hasRole('PROPRIETAIRE')">
                <a th:href="@{/immobilier/immeuble/proprietaire/list}"><i class="bi bi-building"></i> Immeubles</a>
            </li>
            <li sec:authorize="hasRole('PROPRIETAIRE')">
                <a th:href="@{/immobilier/immeuble/add}"><i class="bi bi-plus-square"></i> Ajouter Immeuble</a>
            </li>
            <li sec:authorize="hasRole('PROPRIETAIRE')">
                <a th:href="@{/contrats/proprietaire/list}"><i class="bi bi-file-text"></i> Contrats</a>
            </li>
            <li sec:authorize="hasRole('PROPRIETAIRE')">
                <a th:href="@{/contrats/proprietaire/add}"><i class="bi bi-plus-square"></i> Ajouter Contrat</a>
            </li>
        </ul>
    </div>

    <div class="topbar-right">
        <span sec:authentication="name" class="user-name"></span>
        <a th:href="@{/logout}" class="logout-btn"><i class="bi bi-box-arrow-right"></i></a>
    </div>
</div>
<div class="row mb-30 align-items-stretch">
    <!-- Image immeuble -->
    <div class="col-lg-6 col-md-12 mb-3">
        <div class="card-box h-100 d-flex align-items-center justify-content-center p-3">
            <img th:src="@{/vendors/images/product-img1.jpg}" class="img-fluid rounded" alt="Image immeuble" style="max-height:400px; object-fit:cover; width:100%;">
        </div>
    </div>

    <!-- Détails immeuble -->
    <div class="col-lg-6 col-md-12 mb-3">
        <div class="card-box h-100 p-4 d-flex flex-column justify-content-center">
            <h3 class="product-detail-title">Nom de l'immeuble:
                <span class="product-detail-subtitle" th:text="${immeuble.nom}"></span>
            </h3>

            <h4>Description</h4>
            <p th:text="${immeuble.description}"></p>

            <h4>Équipements</h4>
            <p th:text="${immeuble.equipements}"></p>

            <h4>Adresse</h4>
            <p th:text="${immeuble.adresse}"></p>
        </div>
    </div>
</div>

<!-- Liste unités -->
<h4 class="text-center text-primary mb-4">Unités disponibles</h4>

<div class="row g-4" th:if="${not #lists.isEmpty(unites)}">
    <div class="col-md-6 col-lg-4" th:each="unite : ${unites}">
        <div class="card h-100 shadow-sm border rounded overflow-hidden">
            <div class="card-body d-flex flex-column justify-content-between">
                <div>
                    <h5 class="card-title text-crimson" th:text="${unite.numero}">U1</h5>
                    <p><strong>Loyer:</strong> <span th:text="${unite.loyer}"></span></p>
                    <p><strong>Pièces:</strong> <span th:text="${unite.pieces}"></span></p>
                    <p><strong>Surface:</strong> <span th:text="${unite.surface}"></span></p>
                </div>
                <div class="mt-3 text-center">
                    <a th:href="@{/immobilier/unitelocation/resever/{id}(id=${unite.id})}"
                       class="btn btn-crimson w-100"
                       th:if="${unite.statut.name() == 'DISPONIBLE'}">
                        Réserver
                    </a>
                    <span th:if="${unite.statut.name() != 'DISPONIBLE'}" class="text-muted fw-bold">Indisponible</span>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:if="${#lists.isEmpty(unites)}" class="alert alert-info text-center">
    Aucune unité disponible pour cet immeuble.
</div>

<!-- End Google Tag Manager (noscript) -->
</body>
</html>
